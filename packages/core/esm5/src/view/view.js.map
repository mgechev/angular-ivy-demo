{"version":3,"file":"view.js","sourceRoot":"","sources":["../../../../../../packages/core/src/view/view.ts"],"names":[],"mappings":"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","sourcesContent":["/**\n * @license\n * Copyright Google Inc. All Rights Reserved.\n *\n * Use of this source code is governed by an MIT-style license that can be\n * found in the LICENSE file at https://angular.io/license\n */\n\nimport {Renderer2} from '../render/api';\n\nimport {checkAndUpdateElementDynamic, checkAndUpdateElementInline, createElement, listenToElementOutputs} from './element';\nimport {expressionChangedAfterItHasBeenCheckedError} from './errors';\nimport {appendNgContent} from './ng_content';\nimport {callLifecycleHooksChildrenFirst, checkAndUpdateDirectiveDynamic, checkAndUpdateDirectiveInline, createDirectiveInstance, createPipeInstance, createProviderInstance} from './provider';\nimport {checkAndUpdatePureExpressionDynamic, checkAndUpdatePureExpressionInline, createPureExpression} from './pure_expression';\nimport {checkAndUpdateQuery, createQuery} from './query';\nimport {createTemplateData, createViewContainerData} from './refs';\nimport {checkAndUpdateTextDynamic, checkAndUpdateTextInline, createText} from './text';\nimport {ArgumentType, CheckType, ElementData, NodeData, NodeDef, NodeFlags, ProviderData, RootData, Services, ViewData, ViewDefinition, ViewFlags, ViewHandleEventFn, ViewState, ViewUpdateFn, asElementData, asQueryList, asTextData, shiftInitState} from './types';\nimport {NOOP, checkBindingNoChanges, isComponentView, markParentViewsForCheckProjectedViews, resolveDefinition, tokenKey} from './util';\nimport {detachProjectedView} from './view_attach';\n\nexport function viewDef(\n    flags: ViewFlags, nodes: NodeDef[], updateDirectives?: null | ViewUpdateFn,\n    updateRenderer?: null | ViewUpdateFn): ViewDefinition {\n  // clone nodes and set auto calculated values\n  let viewBindingCount = 0;\n  let viewDisposableCount = 0;\n  let viewNodeFlags = 0;\n  let viewRootNodeFlags = 0;\n  let viewMatchedQueries = 0;\n  let currentParent: NodeDef|null = null;\n  let currentRenderParent: NodeDef|null = null;\n  let currentElementHasPublicProviders = false;\n  let currentElementHasPrivateProviders = false;\n  let lastRenderRootNode: NodeDef|null = null;\n  for (let i = 0; i < nodes.length; i++) {\n    const node = nodes[i];\n    node.nodeIndex = i;\n    node.parent = currentParent;\n    node.bindingIndex = viewBindingCount;\n    node.outputIndex = viewDisposableCount;\n    node.renderParent = currentRenderParent;\n\n    viewNodeFlags |= node.flags;\n    viewMatchedQueries |= node.matchedQueryIds;\n\n    if (node.element) {\n      const elDef = node.element;\n      elDef.publicProviders =\n          currentParent ? currentParent.element !.publicProviders : Object.create(null);\n      elDef.allProviders = elDef.publicProviders;\n      // Note: We assume that all providers of an element are before any child element!\n      currentElementHasPublicProviders = false;\n      currentElementHasPrivateProviders = false;\n\n      if (node.element.template) {\n        viewMatchedQueries |= node.element.template.nodeMatchedQueries;\n      }\n    }\n    validateNode(currentParent, node, nodes.length);\n\n\n    viewBindingCount += node.bindings.length;\n    viewDisposableCount += node.outputs.length;\n\n    if (!currentRenderParent && (node.flags & NodeFlags.CatRenderNode)) {\n      lastRenderRootNode = node;\n    }\n\n    if (node.flags & NodeFlags.CatProvider) {\n      if (!currentElementHasPublicProviders) {\n        currentElementHasPublicProviders = true;\n        // Use prototypical inheritance to not get O(n^2) complexity...\n        currentParent !.element !.publicProviders =\n            Object.create(currentParent !.element !.publicProviders);\n        currentParent !.element !.allProviders = currentParent !.element !.publicProviders;\n      }\n      const isPrivateService = (node.flags & NodeFlags.PrivateProvider) !== 0;\n      const isComponent = (node.flags & NodeFlags.Component) !== 0;\n      if (!isPrivateService || isComponent) {\n        currentParent !.element !.publicProviders ![tokenKey(node.provider !.token)] = node;\n      } else {\n        if (!currentElementHasPrivateProviders) {\n          currentElementHasPrivateProviders = true;\n          // Use prototypical inheritance to not get O(n^2) complexity...\n          currentParent !.element !.allProviders =\n              Object.create(currentParent !.element !.publicProviders);\n        }\n        currentParent !.element !.allProviders ![tokenKey(node.provider !.token)] = node;\n      }\n      if (isComponent) {\n        currentParent !.element !.componentProvider = node;\n      }\n    }\n\n    if (currentParent) {\n      currentParent.childFlags |= node.flags;\n      currentParent.directChildFlags |= node.flags;\n      currentParent.childMatchedQueries |= node.matchedQueryIds;\n      if (node.element && node.element.template) {\n        currentParent.childMatchedQueries |= node.element.template.nodeMatchedQueries;\n      }\n    } else {\n      viewRootNodeFlags |= node.flags;\n    }\n\n    if (node.childCount > 0) {\n      currentParent = node;\n\n      if (!isNgContainer(node)) {\n        currentRenderParent = node;\n      }\n    } else {\n      // When the current node has no children, check if it is the last children of its parent.\n      // When it is, propagate the flags up.\n      // The loop is required because an element could be the last transitive children of several\n      // elements. We loop to either the root or the highest opened element (= with remaining\n      // children)\n      while (currentParent && i === currentParent.nodeIndex + currentParent.childCount) {\n        const newParent: NodeDef|null = currentParent.parent;\n        if (newParent) {\n          newParent.childFlags |= currentParent.childFlags;\n          newParent.childMatchedQueries |= currentParent.childMatchedQueries;\n        }\n        currentParent = newParent;\n        // We also need to update the render parent & account for ng-container\n        if (currentParent && isNgContainer(currentParent)) {\n          currentRenderParent = currentParent.renderParent;\n        } else {\n          currentRenderParent = currentParent;\n        }\n      }\n    }\n  }\n\n  const handleEvent: ViewHandleEventFn = (view, nodeIndex, eventName, event) =>\n      nodes[nodeIndex].element !.handleEvent !(view, eventName, event);\n\n  return {\n    // Will be filled later...\n    factory: null,\n    nodeFlags: viewNodeFlags,\n    rootNodeFlags: viewRootNodeFlags,\n    nodeMatchedQueries: viewMatchedQueries, flags,\n    nodes: nodes,\n    updateDirectives: updateDirectives || NOOP,\n    updateRenderer: updateRenderer || NOOP, handleEvent,\n    bindingCount: viewBindingCount,\n    outputCount: viewDisposableCount, lastRenderRootNode\n  };\n}\n\nfunction isNgContainer(node: NodeDef): boolean {\n  return (node.flags & NodeFlags.TypeElement) !== 0 && node.element !.name === null;\n}\n\nfunction validateNode(parent: NodeDef | null, node: NodeDef, nodeCount: number) {\n  const template = node.element && node.element.template;\n  if (template) {\n    if (!template.lastRenderRootNode) {\n      throw new Error(`Illegal State: Embedded templates without nodes are not allowed!`);\n    }\n    if (template.lastRenderRootNode &&\n        template.lastRenderRootNode.flags & NodeFlags.EmbeddedViews) {\n      throw new Error(\n          `Illegal State: Last root node of a template can't have embedded views, at index ${node.nodeIndex}!`);\n    }\n  }\n  if (node.flags & NodeFlags.CatProvider) {\n    const parentFlags = parent ? parent.flags : 0;\n    if ((parentFlags & NodeFlags.TypeElement) === 0) {\n      throw new Error(\n          `Illegal State: StaticProvider/Directive nodes need to be children of elements or anchors, at index ${node.nodeIndex}!`);\n    }\n  }\n  if (node.query) {\n    if (node.flags & NodeFlags.TypeContentQuery &&\n        (!parent || (parent.flags & NodeFlags.TypeDirective) === 0)) {\n      throw new Error(\n          `Illegal State: Content Query nodes need to be children of directives, at index ${node.nodeIndex}!`);\n    }\n    if (node.flags & NodeFlags.TypeViewQuery && parent) {\n      throw new Error(\n          `Illegal State: View Query nodes have to be top level nodes, at index ${node.nodeIndex}!`);\n    }\n  }\n  if (node.childCount) {\n    const parentEnd = parent ? parent.nodeIndex + parent.childCount : nodeCount - 1;\n    if (node.nodeIndex <= parentEnd && node.nodeIndex + node.childCount > parentEnd) {\n      throw new Error(\n          `Illegal State: childCount of node leads outside of parent, at index ${node.nodeIndex}!`);\n    }\n  }\n}\n\nexport function createEmbeddedView(\n    parent: ViewData, anchorDef: NodeDef, viewDef: ViewDefinition, context?: any): ViewData {\n  // embedded views are seen as siblings to the anchor, so we need\n  // to get the parent of the anchor and use it as parentIndex.\n  const view = createView(parent.root, parent.renderer, parent, anchorDef, viewDef);\n  initView(view, parent.component, context);\n  createViewNodes(view);\n  return view;\n}\n\nexport function createRootView(root: RootData, def: ViewDefinition, context?: any): ViewData {\n  const view = createView(root, root.renderer, null, null, def);\n  initView(view, context, context);\n  createViewNodes(view);\n  return view;\n}\n\nexport function createComponentView(\n    parentView: ViewData, nodeDef: NodeDef, viewDef: ViewDefinition, hostElement: any): ViewData {\n  const rendererType = nodeDef.element !.componentRendererType;\n  let compRenderer: Renderer2;\n  if (!rendererType) {\n    compRenderer = parentView.root.renderer;\n  } else {\n    compRenderer = parentView.root.rendererFactory.createRenderer(hostElement, rendererType);\n  }\n  return createView(\n      parentView.root, compRenderer, parentView, nodeDef.element !.componentProvider, viewDef);\n}\n\nfunction createView(\n    root: RootData, renderer: Renderer2, parent: ViewData | null, parentNodeDef: NodeDef | null,\n    def: ViewDefinition): ViewData {\n  const nodes: NodeData[] = new Array(def.nodes.length);\n  const disposables = def.outputCount ? new Array(def.outputCount) : null;\n  const view: ViewData = {\n    def,\n    parent,\n    viewContainerParent: null, parentNodeDef,\n    context: null,\n    component: null, nodes,\n    state: ViewState.CatInit, root, renderer,\n    oldValues: new Array(def.bindingCount), disposables,\n    initIndex: -1\n  };\n  return view;\n}\n\nfunction initView(view: ViewData, component: any, context: any) {\n  view.component = component;\n  view.context = context;\n}\n\nfunction createViewNodes(view: ViewData) {\n  let renderHost: any;\n  if (isComponentView(view)) {\n    const hostDef = view.parentNodeDef;\n    renderHost = asElementData(view.parent !, hostDef !.parent !.nodeIndex).renderElement;\n  }\n  const def = view.def;\n  const nodes = view.nodes;\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    Services.setCurrentNode(view, i);\n    let nodeData: any;\n    switch (nodeDef.flags & NodeFlags.Types) {\n      case NodeFlags.TypeElement:\n        const el = createElement(view, renderHost, nodeDef) as any;\n        let componentView: ViewData = undefined !;\n        if (nodeDef.flags & NodeFlags.ComponentView) {\n          const compViewDef = resolveDefinition(nodeDef.element !.componentView !);\n          componentView = Services.createComponentView(view, nodeDef, compViewDef, el);\n        }\n        listenToElementOutputs(view, componentView, nodeDef, el);\n        nodeData = <ElementData>{\n          renderElement: el,\n          componentView,\n          viewContainer: null,\n          template: nodeDef.element !.template ? createTemplateData(view, nodeDef) : undefined\n        };\n        if (nodeDef.flags & NodeFlags.EmbeddedViews) {\n          nodeData.viewContainer = createViewContainerData(view, nodeDef, nodeData);\n        }\n        break;\n      case NodeFlags.TypeText:\n        nodeData = createText(view, renderHost, nodeDef) as any;\n        break;\n      case NodeFlags.TypeClassProvider:\n      case NodeFlags.TypeFactoryProvider:\n      case NodeFlags.TypeUseExistingProvider:\n      case NodeFlags.TypeValueProvider: {\n        nodeData = nodes[i];\n        if (!nodeData && !(nodeDef.flags & NodeFlags.LazyProvider)) {\n          const instance = createProviderInstance(view, nodeDef);\n          nodeData = <ProviderData>{instance};\n        }\n        break;\n      }\n      case NodeFlags.TypePipe: {\n        const instance = createPipeInstance(view, nodeDef);\n        nodeData = <ProviderData>{instance};\n        break;\n      }\n      case NodeFlags.TypeDirective: {\n        nodeData = nodes[i];\n        if (!nodeData) {\n          const instance = createDirectiveInstance(view, nodeDef);\n          nodeData = <ProviderData>{instance};\n        }\n        if (nodeDef.flags & NodeFlags.Component) {\n          const compView = asElementData(view, nodeDef.parent !.nodeIndex).componentView;\n          initView(compView, nodeData.instance, nodeData.instance);\n        }\n        break;\n      }\n      case NodeFlags.TypePureArray:\n      case NodeFlags.TypePureObject:\n      case NodeFlags.TypePurePipe:\n        nodeData = createPureExpression(view, nodeDef) as any;\n        break;\n      case NodeFlags.TypeContentQuery:\n      case NodeFlags.TypeViewQuery:\n        nodeData = createQuery() as any;\n        break;\n      case NodeFlags.TypeNgContent:\n        appendNgContent(view, renderHost, nodeDef);\n        // no runtime data needed for NgContent...\n        nodeData = undefined;\n        break;\n    }\n    nodes[i] = nodeData;\n  }\n  // Create the ViewData.nodes of component views after we created everything else,\n  // so that e.g. ng-content works\n  execComponentViewsAction(view, ViewAction.CreateViewNodes);\n\n  // fill static content and view queries\n  execQueriesAction(\n      view, NodeFlags.TypeContentQuery | NodeFlags.TypeViewQuery, NodeFlags.StaticQuery,\n      CheckType.CheckAndUpdate);\n}\n\nexport function checkNoChangesView(view: ViewData) {\n  markProjectedViewsForCheck(view);\n  Services.updateDirectives(view, CheckType.CheckNoChanges);\n  execEmbeddedViewsAction(view, ViewAction.CheckNoChanges);\n  Services.updateRenderer(view, CheckType.CheckNoChanges);\n  execComponentViewsAction(view, ViewAction.CheckNoChanges);\n  // Note: We don't check queries for changes as we didn't do this in v2.x.\n  // TODO(tbosch): investigate if we can enable the check again in v5.x with a nicer error message.\n  view.state &= ~(ViewState.CheckProjectedViews | ViewState.CheckProjectedView);\n}\n\nexport function checkAndUpdateView(view: ViewData) {\n  if (view.state & ViewState.BeforeFirstCheck) {\n    view.state &= ~ViewState.BeforeFirstCheck;\n    view.state |= ViewState.FirstCheck;\n  } else {\n    view.state &= ~ViewState.FirstCheck;\n  }\n  shiftInitState(view, ViewState.InitState_BeforeInit, ViewState.InitState_CallingOnInit);\n  markProjectedViewsForCheck(view);\n  Services.updateDirectives(view, CheckType.CheckAndUpdate);\n  execEmbeddedViewsAction(view, ViewAction.CheckAndUpdate);\n  execQueriesAction(\n      view, NodeFlags.TypeContentQuery, NodeFlags.DynamicQuery, CheckType.CheckAndUpdate);\n  let callInit = shiftInitState(\n      view, ViewState.InitState_CallingOnInit, ViewState.InitState_CallingAfterContentInit);\n  callLifecycleHooksChildrenFirst(\n      view, NodeFlags.AfterContentChecked | (callInit ? NodeFlags.AfterContentInit : 0));\n\n  Services.updateRenderer(view, CheckType.CheckAndUpdate);\n\n  execComponentViewsAction(view, ViewAction.CheckAndUpdate);\n  execQueriesAction(\n      view, NodeFlags.TypeViewQuery, NodeFlags.DynamicQuery, CheckType.CheckAndUpdate);\n  callInit = shiftInitState(\n      view, ViewState.InitState_CallingAfterContentInit, ViewState.InitState_CallingAfterViewInit);\n  callLifecycleHooksChildrenFirst(\n      view, NodeFlags.AfterViewChecked | (callInit ? NodeFlags.AfterViewInit : 0));\n\n  if (view.def.flags & ViewFlags.OnPush) {\n    view.state &= ~ViewState.ChecksEnabled;\n  }\n  view.state &= ~(ViewState.CheckProjectedViews | ViewState.CheckProjectedView);\n  shiftInitState(view, ViewState.InitState_CallingAfterViewInit, ViewState.InitState_AfterInit);\n}\n\nexport function checkAndUpdateNode(\n    view: ViewData, nodeDef: NodeDef, argStyle: ArgumentType, v0?: any, v1?: any, v2?: any,\n    v3?: any, v4?: any, v5?: any, v6?: any, v7?: any, v8?: any, v9?: any): boolean {\n  if (argStyle === ArgumentType.Inline) {\n    return checkAndUpdateNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n  } else {\n    return checkAndUpdateNodeDynamic(view, nodeDef, v0);\n  }\n}\n\nfunction markProjectedViewsForCheck(view: ViewData) {\n  const def = view.def;\n  if (!(def.nodeFlags & NodeFlags.ProjectedTemplate)) {\n    return;\n  }\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    if (nodeDef.flags & NodeFlags.ProjectedTemplate) {\n      const projectedViews = asElementData(view, i).template._projectedViews;\n      if (projectedViews) {\n        for (let i = 0; i < projectedViews.length; i++) {\n          const projectedView = projectedViews[i];\n          projectedView.state |= ViewState.CheckProjectedView;\n          markParentViewsForCheckProjectedViews(projectedView, view);\n        }\n      }\n    } else if ((nodeDef.childFlags & NodeFlags.ProjectedTemplate) === 0) {\n      // a parent with leafs\n      // no child is a component,\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n\nfunction checkAndUpdateNodeInline(\n    view: ViewData, nodeDef: NodeDef, v0?: any, v1?: any, v2?: any, v3?: any, v4?: any, v5?: any,\n    v6?: any, v7?: any, v8?: any, v9?: any): boolean {\n  switch (nodeDef.flags & NodeFlags.Types) {\n    case NodeFlags.TypeElement:\n      return checkAndUpdateElementInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    case NodeFlags.TypeText:\n      return checkAndUpdateTextInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    case NodeFlags.TypeDirective:\n      return checkAndUpdateDirectiveInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    case NodeFlags.TypePureArray:\n    case NodeFlags.TypePureObject:\n    case NodeFlags.TypePurePipe:\n      return checkAndUpdatePureExpressionInline(\n          view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n    default:\n      throw 'unreachable';\n  }\n}\n\nfunction checkAndUpdateNodeDynamic(view: ViewData, nodeDef: NodeDef, values: any[]): boolean {\n  switch (nodeDef.flags & NodeFlags.Types) {\n    case NodeFlags.TypeElement:\n      return checkAndUpdateElementDynamic(view, nodeDef, values);\n    case NodeFlags.TypeText:\n      return checkAndUpdateTextDynamic(view, nodeDef, values);\n    case NodeFlags.TypeDirective:\n      return checkAndUpdateDirectiveDynamic(view, nodeDef, values);\n    case NodeFlags.TypePureArray:\n    case NodeFlags.TypePureObject:\n    case NodeFlags.TypePurePipe:\n      return checkAndUpdatePureExpressionDynamic(view, nodeDef, values);\n    default:\n      throw 'unreachable';\n  }\n}\n\nexport function checkNoChangesNode(\n    view: ViewData, nodeDef: NodeDef, argStyle: ArgumentType, v0?: any, v1?: any, v2?: any,\n    v3?: any, v4?: any, v5?: any, v6?: any, v7?: any, v8?: any, v9?: any): any {\n  if (argStyle === ArgumentType.Inline) {\n    checkNoChangesNodeInline(view, nodeDef, v0, v1, v2, v3, v4, v5, v6, v7, v8, v9);\n  } else {\n    checkNoChangesNodeDynamic(view, nodeDef, v0);\n  }\n  // Returning false is ok here as we would have thrown in case of a change.\n  return false;\n}\n\nfunction checkNoChangesNodeInline(\n    view: ViewData, nodeDef: NodeDef, v0: any, v1: any, v2: any, v3: any, v4: any, v5: any, v6: any,\n    v7: any, v8: any, v9: any): void {\n  const bindLen = nodeDef.bindings.length;\n  if (bindLen > 0) checkBindingNoChanges(view, nodeDef, 0, v0);\n  if (bindLen > 1) checkBindingNoChanges(view, nodeDef, 1, v1);\n  if (bindLen > 2) checkBindingNoChanges(view, nodeDef, 2, v2);\n  if (bindLen > 3) checkBindingNoChanges(view, nodeDef, 3, v3);\n  if (bindLen > 4) checkBindingNoChanges(view, nodeDef, 4, v4);\n  if (bindLen > 5) checkBindingNoChanges(view, nodeDef, 5, v5);\n  if (bindLen > 6) checkBindingNoChanges(view, nodeDef, 6, v6);\n  if (bindLen > 7) checkBindingNoChanges(view, nodeDef, 7, v7);\n  if (bindLen > 8) checkBindingNoChanges(view, nodeDef, 8, v8);\n  if (bindLen > 9) checkBindingNoChanges(view, nodeDef, 9, v9);\n}\n\nfunction checkNoChangesNodeDynamic(view: ViewData, nodeDef: NodeDef, values: any[]): void {\n  for (let i = 0; i < values.length; i++) {\n    checkBindingNoChanges(view, nodeDef, i, values[i]);\n  }\n}\n\n/**\n * Workaround https://github.com/angular/tsickle/issues/497\n * @suppress {misplacedTypeAnnotation}\n */\nfunction checkNoChangesQuery(view: ViewData, nodeDef: NodeDef) {\n  const queryList = asQueryList(view, nodeDef.nodeIndex);\n  if (queryList.dirty) {\n    throw expressionChangedAfterItHasBeenCheckedError(\n        Services.createDebugContext(view, nodeDef.nodeIndex),\n        `Query ${nodeDef.query!.id} not dirty`, `Query ${nodeDef.query!.id} dirty`,\n        (view.state & ViewState.BeforeFirstCheck) !== 0);\n  }\n}\n\nexport function destroyView(view: ViewData) {\n  if (view.state & ViewState.Destroyed) {\n    return;\n  }\n  execEmbeddedViewsAction(view, ViewAction.Destroy);\n  execComponentViewsAction(view, ViewAction.Destroy);\n  callLifecycleHooksChildrenFirst(view, NodeFlags.OnDestroy);\n  if (view.disposables) {\n    for (let i = 0; i < view.disposables.length; i++) {\n      view.disposables[i]();\n    }\n  }\n  detachProjectedView(view);\n  if (view.renderer.destroyNode) {\n    destroyViewNodes(view);\n  }\n  if (isComponentView(view)) {\n    view.renderer.destroy();\n  }\n  view.state |= ViewState.Destroyed;\n}\n\nfunction destroyViewNodes(view: ViewData) {\n  const len = view.def.nodes.length;\n  for (let i = 0; i < len; i++) {\n    const def = view.def.nodes[i];\n    if (def.flags & NodeFlags.TypeElement) {\n      view.renderer.destroyNode !(asElementData(view, i).renderElement);\n    } else if (def.flags & NodeFlags.TypeText) {\n      view.renderer.destroyNode !(asTextData(view, i).renderText);\n    } else if (def.flags & NodeFlags.TypeContentQuery || def.flags & NodeFlags.TypeViewQuery) {\n      asQueryList(view, i).destroy();\n    }\n  }\n}\n\nenum ViewAction {\n  CreateViewNodes,\n  CheckNoChanges,\n  CheckNoChangesProjectedViews,\n  CheckAndUpdate,\n  CheckAndUpdateProjectedViews,\n  Destroy\n}\n\nfunction execComponentViewsAction(view: ViewData, action: ViewAction) {\n  const def = view.def;\n  if (!(def.nodeFlags & NodeFlags.ComponentView)) {\n    return;\n  }\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    if (nodeDef.flags & NodeFlags.ComponentView) {\n      // a leaf\n      callViewAction(asElementData(view, i).componentView, action);\n    } else if ((nodeDef.childFlags & NodeFlags.ComponentView) === 0) {\n      // a parent with leafs\n      // no child is a component,\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n\nfunction execEmbeddedViewsAction(view: ViewData, action: ViewAction) {\n  const def = view.def;\n  if (!(def.nodeFlags & NodeFlags.EmbeddedViews)) {\n    return;\n  }\n  for (let i = 0; i < def.nodes.length; i++) {\n    const nodeDef = def.nodes[i];\n    if (nodeDef.flags & NodeFlags.EmbeddedViews) {\n      // a leaf\n      const embeddedViews = asElementData(view, i).viewContainer !._embeddedViews;\n      for (let k = 0; k < embeddedViews.length; k++) {\n        callViewAction(embeddedViews[k], action);\n      }\n    } else if ((nodeDef.childFlags & NodeFlags.EmbeddedViews) === 0) {\n      // a parent with leafs\n      // no child is a component,\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n\nfunction callViewAction(view: ViewData, action: ViewAction) {\n  const viewState = view.state;\n  switch (action) {\n    case ViewAction.CheckNoChanges:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if ((viewState & ViewState.CatDetectChanges) === ViewState.CatDetectChanges) {\n          checkNoChangesView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, ViewAction.CheckNoChangesProjectedViews);\n        }\n      }\n      break;\n    case ViewAction.CheckNoChangesProjectedViews:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if (viewState & ViewState.CheckProjectedView) {\n          checkNoChangesView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, action);\n        }\n      }\n      break;\n    case ViewAction.CheckAndUpdate:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if ((viewState & ViewState.CatDetectChanges) === ViewState.CatDetectChanges) {\n          checkAndUpdateView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, ViewAction.CheckAndUpdateProjectedViews);\n        }\n      }\n      break;\n    case ViewAction.CheckAndUpdateProjectedViews:\n      if ((viewState & ViewState.Destroyed) === 0) {\n        if (viewState & ViewState.CheckProjectedView) {\n          checkAndUpdateView(view);\n        } else if (viewState & ViewState.CheckProjectedViews) {\n          execProjectedViewsAction(view, action);\n        }\n      }\n      break;\n    case ViewAction.Destroy:\n      // Note: destroyView recurses over all views,\n      // so we don't need to special case projected views here.\n      destroyView(view);\n      break;\n    case ViewAction.CreateViewNodes:\n      createViewNodes(view);\n      break;\n  }\n}\n\nfunction execProjectedViewsAction(view: ViewData, action: ViewAction) {\n  execEmbeddedViewsAction(view, action);\n  execComponentViewsAction(view, action);\n}\n\nfunction execQueriesAction(\n    view: ViewData, queryFlags: NodeFlags, staticDynamicQueryFlag: NodeFlags,\n    checkType: CheckType) {\n  if (!(view.def.nodeFlags & queryFlags) || !(view.def.nodeFlags & staticDynamicQueryFlag)) {\n    return;\n  }\n  const nodeCount = view.def.nodes.length;\n  for (let i = 0; i < nodeCount; i++) {\n    const nodeDef = view.def.nodes[i];\n    if ((nodeDef.flags & queryFlags) && (nodeDef.flags & staticDynamicQueryFlag)) {\n      Services.setCurrentNode(view, nodeDef.nodeIndex);\n      switch (checkType) {\n        case CheckType.CheckAndUpdate:\n          checkAndUpdateQuery(view, nodeDef);\n          break;\n        case CheckType.CheckNoChanges:\n          checkNoChangesQuery(view, nodeDef);\n          break;\n      }\n    }\n    if (!(nodeDef.childFlags & queryFlags) || !(nodeDef.childFlags & staticDynamicQueryFlag)) {\n      // no child has a matching query\n      // then skip the children\n      i += nodeDef.childCount;\n    }\n  }\n}\n"]}